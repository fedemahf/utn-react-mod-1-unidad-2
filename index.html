<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Calculadora</title>
        <style>
            .error {
                color: darkred;
            }
        </style>
    </head>
    <body>
        <!--
            Consigna:

            Desarrollador una calculadora que tenga:

            2 campos inputs para los operandos
            4 botones de operadores básicos (suma, resta, multiplicación, división)
            Al realizar la cuenta se deberá actualizar el campo resultado
        -->
        <div>
            <h1>Calculadora</h1>
            <p>
                <label for="primerOperando">Primer operando:</label>
                <input type="number" name="primerOperando" id="primerOperando">
                <span id="primerOperandoError" class="error"></span>
            </p>
            <p>
                <label for="segundoOperando">Segundo operando:</label>
                <input type="number" name="segundoOperando" id="segundoOperando">
                <span id="segundoOperandoError" class="error"></span>
            </p>
            <p>
                <button id="btnSuma">Sumar</button>
                <button id="btnResta">Restar</button>
                <button id="btnMul">Multiplicar</button>
                <button id="btnDiv">Dividir</button>
            </p>
            <p>
                <label for="resultado">Resultado:</label>
                <input type="number" name="resultado" id="resultado" disabled>
                <span id="resultadoError" class="error"></span>
            </p>
        </div>
        <script type="application/javascript">
            class Calculadora {
                primerOperandoInput = document.getElementById("primerOperando");
                segundoOperandoInput = document.getElementById("segundoOperando");
                resultadoInput = document.getElementById("resultado");
                primerOperandoErrorInput = document.getElementById("primerOperandoError");
                segundoOperandoErrorInput = document.getElementById("segundoOperandoError");
                resultadoErrorInput = document.getElementById("resultadoError");

                constructor() {
                    document.getElementById("btnSuma").addEventListener("click", () => {this.operar("+")});
                    document.getElementById("btnResta").addEventListener("click", () => {this.operar("-")});
                    document.getElementById("btnMul").addEventListener("click", () => {this.operar("*")});
                    document.getElementById("btnDiv").addEventListener("click", () => {this.operar("/")});
                }

                operandoEsValido(operando) {
                    return /^-?\d+(\.\d+)?$/m.exec(operando) !== null;
                }

                operar(operador) {
                    let primerOperando = this.primerOperandoInput.value;
                    let segundoOperando = this.segundoOperandoInput.value;
                    let primerOperandoError = "";
                    let segundoOperandoError = "";
                    let resultadoError = "";

                    // Comprobar primer operando
                    if (primerOperando === "") {
                        primerOperandoError = "Debes ingresar un operando.";
                    } else if (!this.operandoEsValido(primerOperando)) {
                        primerOperandoError = "El operando no es válido.";
                    }

                    // Comprobar segundo operando
                    if (segundoOperando === "") {
                        segundoOperandoError = "Debes ingresar un operando.";
                    } else if (!this.operandoEsValido(segundoOperando)) {
                        segundoOperandoError = "El operando no es válido.";
                    }

                    // Si no hubo errores en los operandos...
                    if (primerOperandoError === "" && segundoOperandoError === "") {
                        let resultadoOperacion = eval(`${primerOperando} ${operador} ${segundoOperando}`);

                        if (resultadoOperacion !== undefined) {
                            this.resultadoInput.value = resultadoOperacion;
                        } else {
                            this.resultadoInput.value = "";
                            resultadoError = "No se pudo completar la operación.";
                        }
                    }

                    // Refrescar mensajes de error
                    this.primerOperandoErrorInput.innerHTML = primerOperandoError;
                    this.segundoOperandoErrorInput.innerHTML = segundoOperandoError;
                    this.resultadoErrorInput.innerHTML = resultadoError;
                }
            }

            new Calculadora();
        </script>
    </body>
</html>